# AllStar Nexus - Recent Updates

## Date: October 7, 2025

### Issues Fixed

#### 1. Node "0 -- STOP" Events on Page Reload
**Problem**: The talker log was showing entries with node 0 on page reload, causing confusing "0 -- STOP" entries.

**Solution**: 
- Modified `frontend/src/stores/node.js` to filter out `node=0` events in two places:
  - `loadTalkerHistory()` - filters historical events loaded from API
  - `handleWSMessage()` - filters snapshot events received on WebSocket connect
- Modified `frontend/src/views/Dashboard.vue` to skip `node=0` events in the `talkerDisplay` computed property

**Result**: No more confusing node 0 entries in the talker log after page reload.

---

### New Features

#### 2. Clickable Node Numbers
**Implementation**: 
- Node numbers are now clickable links that open AllStarLink stats in a new tab
- Link format: `https://stats.allstarlink.org/stats/{nodeNumber}`
- Applied in:
  - Active Links table (`LinksCard.vue`)
  - Talker Log entries (`Dashboard.vue`)
- Only positive node numbers are clickable (node > 0)

**Styling**: 
- Links use accent color with hover effects
- Maintain existing visual hierarchy

#### 3. Clickable Callsigns
**Implementation**:
- Callsigns are now clickable links that open QRZ.com in a new tab
- Link format: `https://www.qrz.com/db/{CALLSIGN}` (uppercase)
- Applied in:
  - Active Links table callsign column
  - Talker Log callsign display
- All links open in new tab with `target="_blank"` and `rel="noopener noreferrer"` for security

**Styling**:
- Callsigns maintain their green color (#10b981) with darker hover state
- Clean underline on hover for better UX

#### 4. Network Map View
**Implementation**:
- New dedicated view at `/network-map` route
- Embeds AllStarLink bubble chart: `https://stats.allstarlink.org/stats/{nodeNumber}/networkMap`
- Features:
  - Dropdown to select from configured nodes (if multiple nodes)
  - Full-screen iframe embedding the network map
  - Responsive design with minimum 600px height
  - Auto-selects first configured node on mount
  - Shows callsign + node number in dropdown when available

**Navigation**:
- Added "Network Map" link to main navbar (between "Node Lookup" and "RPT Stats")
- Available to all users (not auth-protected)

---

### Files Modified

#### Frontend
- `frontend/src/stores/node.js` - Filter node=0 events
- `frontend/src/views/Dashboard.vue` - Clickable links in talker log, skip node=0
- `frontend/src/components/LinksCard.vue` - Clickable node numbers and callsigns
- `frontend/src/router/index.js` - Added NetworkMap route
- `frontend/src/App.vue` - Added Network Map navigation link

#### New Files
- `frontend/src/views/NetworkMap.vue` - Network map view component

---

### Technical Details

**Link Security**:
All external links use:
```html
target="_blank" rel="noopener noreferrer"
```
This prevents the opened page from accessing the opener window and protects against reverse tabnabbing attacks.

**HTML Rendering**:
The talker log now uses `v-html` to render clickable links. This is safe because the HTML is generated entirely by the component (not user input).

**Responsive Design**:
The Network Map view is fully responsive:
- Map container height: `calc(100vh - 300px)` with 600px minimum
- Node selector collapses on mobile
- Iframe scales to container

---

### Testing Checklist
- [x] Frontend builds successfully
- [x] Backend builds and embeds frontend
- [x] Node 0 events filtered on page reload
- [x] Node numbers clickable in Active Links
- [x] Node numbers clickable in Talker Log
- [x] Callsigns clickable in Active Links
- [x] Callsigns clickable in Talker Log
- [x] Network Map view accessible via navigation
- [x] Network Map iframe loads correctly
- [x] Links open in new tabs
- [x] Hover states work correctly

---

### Next Steps (Optional Enhancements)
1. Add loading indicator for iframe in Network Map
2. Add refresh button for Network Map
3. Consider adding tooltip for external link icon
4. Add analytics tracking for external link clicks
5. Add error boundary for iframe load failures
